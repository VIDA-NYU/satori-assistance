<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Pipeline Server (ptgctl_pipeline)" href="../ptgctl_pipeline.html" /><link rel="prev" title="Pipeline Configuration (pipeline.yaml)" href="../configs/pipeline_yaml.html" />
        <link rel="canonical" href="https://vida-nyu.github.io/satori-assistance/overview/stream_pipeline_design.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.08.06 -->
        <title>Stream-Pipeline Design - Satori v0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Satori v0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Satori v0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../configs/index.html">Configuration Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Configuration Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../configs/agent_yaml.html">Agent Configuration (<cite>agent.yaml</cite>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configs/pipeline_yaml.html">Pipeline Configuration (<cite>pipeline.yaml</cite>)</a></li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Stream-Pipeline Design</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ptgctl_pipeline.html">Pipeline Server (ptgctl_pipeline)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Pipeline Server (ptgctl_pipeline)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ptgctl_pipeline.pipelines.html">Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptgctl_pipeline.codec.html">Codecs Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptgctl_pipeline.logger.html">Logger Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptgctl_pipeline.utils.html">Request Utilities</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../pipelines.html">Pipelines</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Pipelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipelines.frame_selector.html">Frame Selector Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipelines.render.html">Render</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipelines.task_planner.html">Guidance Pipelines</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/overview/stream_pipeline_design.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="stream-pipeline-design">
<h1>Stream-Pipeline Design<a class="headerlink" href="#stream-pipeline-design" title="Permalink to this heading">¶</a></h1>
<section id="stream-pipeline-architecture-for-ar-task-assistance">
<h2>Stream-Pipeline Architecture for AR Task Assistance<a class="headerlink" href="#stream-pipeline-architecture-for-ar-task-assistance" title="Permalink to this heading">¶</a></h2>
<p>This document outlines the design rationale and infrastructure of our AR assistance system, focusing on a modular, stream-driven pipeline architecture. The system is designed for real-time interaction, cognitive modularity, and ease of integration with AR interfaces.</p>
<hr class="docutils" />
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h3>
<p>Our AR assistant system is built around two central concepts:</p>
<ul class="simple">
<li><p><strong>Streams</strong>: Named data channels for input, output, and communication between modules.</p></li>
<li><p><strong>Pipelines</strong>: Stateless, reactive functions that process data from streams and write back results.</p></li>
</ul>
<p>Each pipeline is designed to run independently and respond only when triggered, enabling flexible, low-latency computation suitable for AR environments.</p>
</section>
<hr class="docutils" />
<section id="design-rationale">
<h3>Design Rationale<a class="headerlink" href="#design-rationale" title="Permalink to this heading">¶</a></h3>
<section id="psychological-inspiration-parallel-cognitive-modules">
<h4>Psychological Inspiration: Parallel Cognitive Modules<a class="headerlink" href="#psychological-inspiration-parallel-cognitive-modules" title="Permalink to this heading">¶</a></h4>
<p>The system is influenced by psychological models of <strong>parallel processing in the human mind</strong>, where specialized brain areas (e.g., vision, reasoning, memory) operate concurrently and coordinate through shared mental states. Similarly, our pipelines are independent units of logic (vision, reasoning, guidance) that interact through shared streams.</p>
</section>
<section id="system-architecture-analogy-stream-based-microservices">
<h4>System Architecture Analogy: Stream-Based Microservices<a class="headerlink" href="#system-architecture-analogy-stream-based-microservices" title="Permalink to this heading">¶</a></h4>
<p>Our infrastructure reflects principles found in <strong>modern stream microservices</strong> such as <strong>Kafka Streams</strong> and <strong>Flink</strong>:</p>
<ul class="simple">
<li><p>Streams represent time-ordered data logs or state snapshots.</p></li>
<li><p>Pipelines are stateless functions, similar to microservices or stream processors.</p></li>
<li><p>Execution is event-driven but data access is state-based.</p></li>
</ul>
<p>This hybrid model allows us to combine <strong>state consistency</strong> (e.g., latest camera frame) with <strong>reactive execution</strong> (e.g., user action detected).</p>
</section>
</section>
<hr class="docutils" />
<section id="key-concepts">
<h3>Key Concepts<a class="headerlink" href="#key-concepts" title="Permalink to this heading">¶</a></h3>
<section id="streams">
<h4>1. Streams<a class="headerlink" href="#streams" title="Permalink to this heading">¶</a></h4>
<p>A stream is a named channel that holds or transmits data between modules.</p>
<ul class="simple">
<li><p><strong>Input Stream</strong>: Carries ongoing data (e.g., camera frames, user belief).</p></li>
<li><p><strong>Trigger Stream</strong>: Signals when a pipeline should run.</p></li>
<li><p><strong>Output Stream</strong>: Receives computed results (e.g., guidance, prompts).</p></li>
</ul>
<p>Streams are interpreted both as:</p>
<ul class="simple">
<li><p><strong>State</strong>: The latest known value.</p></li>
<li><p><strong>Events</strong>: State-change triggers that invoke pipeline logic.</p></li>
</ul>
</section>
<section id="pipelines">
<h4>2. Pipelines<a class="headerlink" href="#pipelines" title="Permalink to this heading">¶</a></h4>
<p>Pipelines are reactive, stateless processors:</p>
<ul class="simple">
<li><p>Triggered by a trigger stream.</p></li>
<li><p>Read the latest values from one or more input streams.</p></li>
<li><p>Output a <strong>state-update event</strong> to an output stream.</p></li>
</ul>
<p>Each pipeline is analogous to a <strong>lambda function</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">output</span>
</pre></div>
</div>
<p>Execution only occurs when explicitly triggered.</p>
</section>
<section id="pipeline-server">
<h4>3. Pipeline Server<a class="headerlink" href="#pipeline-server" title="Permalink to this heading">¶</a></h4>
<p>The pipeline server manages:</p>
<ul class="simple">
<li><p>Stream subscriptions.</p></li>
<li><p>Asynchronous execution of pipelines.</p></li>
<li><p>Routing input, trigger, and output streams.</p></li>
</ul>
<p>It orchestrates parallel execution while keeping pipelines decoupled.</p>
</section>
</section>
<hr class="docutils" />
<section id="example-step-confirmation-in-ar-task">
<h3>Example: Step Confirmation in AR Task<a class="headerlink" href="#example-step-confirmation-in-ar-task" title="Permalink to this heading">¶</a></h3>
<p><strong>Scenario</strong>: The assistant needs to confirm whether the user is performing “Task X”.</p>
<section id="flow">
<h4>Flow:<a class="headerlink" href="#flow" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p><strong>Pipeline writes to <code class="docutils literal notranslate"><span class="pre">stream:popup_request</span></code></strong>:</p></li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;interaction_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abc123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Are you doing Task X?&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;no&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;active&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Frontend reads <code class="docutils literal notranslate"><span class="pre">stream:popup_request</span></code></strong>, displays a confirmation window.</p></li>
<li><p><strong>User clicks “yes”</strong>, and the UI writes to <code class="docutils literal notranslate"><span class="pre">stream:popup_response</span></code>:</p></li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;interaction_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abc123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Pipeline listening to <code class="docutils literal notranslate"><span class="pre">popup_response</span></code></strong> reads the result and continues execution.</p></li>
</ol>
<p>This interaction pattern uses:</p>
<ul class="simple">
<li><p><strong>Streams as state-update events</strong>.</p></li>
<li><p><strong>Unique interaction IDs</strong> to match prompt and response.</p></li>
<li><p>Clear separation between pipeline logic and interface state.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="interaction-design-structured-protocol">
<h3>Interaction Design: Structured Protocol<a class="headerlink" href="#interaction-design-structured-protocol" title="Permalink to this heading">¶</a></h3>
<p>To manage human-in-the-loop interactions, we define a minimal protocol:</p>
<section id="request-stream-popup-request">
<h4>Request Stream (<code class="docutils literal notranslate"><span class="pre">popup_request</span></code>)<a class="headerlink" href="#request-stream-popup-request" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_id</span></code>: Unique ID for each interaction.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>: Prompt text.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Valid responses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">status</span></code>: <code class="docutils literal notranslate"><span class="pre">active</span></code>, <code class="docutils literal notranslate"><span class="pre">completed</span></code>, <code class="docutils literal notranslate"><span class="pre">expired</span></code>.</p></li>
</ul>
</section>
<section id="response-stream-popup-response">
<h4>Response Stream (<code class="docutils literal notranslate"><span class="pre">popup_response</span></code>)<a class="headerlink" href="#response-stream-popup-response" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">interaction_id</span></code>: Matches the prompt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">response</span></code>: The user’s choice.</p></li>
</ul>
<p>This design ensures:</p>
<ul class="simple">
<li><p><strong>Scalability</strong> with multiple simultaneous prompts.</p></li>
<li><p><strong>Fault tolerance</strong> if UI restarts.</p></li>
<li><p><strong>Clear lifecycle control</strong> using <code class="docutils literal notranslate"><span class="pre">status</span></code> and timestamps.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h3>
<p>This architecture allows us to build AR assistants that are:</p>
<ul class="simple">
<li><p>Modular and parallel, reflecting human cognition.</p></li>
<li><p>Reactive and efficient, using event-driven computation.</p></li>
<li><p>Scalable and maintainable, inspired by modern stream systems.</p></li>
</ul>
<p>By combining streams and lambda-style pipelines, we achieve a clean separation of concerns, clear data flow, and consistent user interaction, all within a lightweight and extensible framework.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../ptgctl_pipeline.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Pipeline Server (ptgctl_pipeline)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../configs/pipeline_yaml.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Pipeline Configuration (<cite>pipeline.yaml</cite>)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, VIDA-NYU
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Stream-Pipeline Design</a><ul>
<li><a class="reference internal" href="#stream-pipeline-architecture-for-ar-task-assistance">Stream-Pipeline Architecture for AR Task Assistance</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#design-rationale">Design Rationale</a><ul>
<li><a class="reference internal" href="#psychological-inspiration-parallel-cognitive-modules">Psychological Inspiration: Parallel Cognitive Modules</a></li>
<li><a class="reference internal" href="#system-architecture-analogy-stream-based-microservices">System Architecture Analogy: Stream-Based Microservices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-concepts">Key Concepts</a><ul>
<li><a class="reference internal" href="#streams">1. Streams</a></li>
<li><a class="reference internal" href="#pipelines">2. Pipelines</a></li>
<li><a class="reference internal" href="#pipeline-server">3. Pipeline Server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-step-confirmation-in-ar-task">Example: Step Confirmation in AR Task</a><ul>
<li><a class="reference internal" href="#flow">Flow:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interaction-design-structured-protocol">Interaction Design: Structured Protocol</a><ul>
<li><a class="reference internal" href="#request-stream-popup-request">Request Stream (<code class="docutils literal notranslate"><span class="pre">popup_request</span></code>)</a></li>
<li><a class="reference internal" href="#response-stream-popup-response">Response Stream (<code class="docutils literal notranslate"><span class="pre">popup_response</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=4c0d86c8"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>